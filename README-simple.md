# AnyRouter 简易每日打卡系统

## 🎯 简化版本说明

这是一个更简单实用的AnyRouter每日打卡系统。你只需要手动登录一次，系统就会保持登录状态并自动进行每日打卡。

## 🚀 使用方法

### 1. 启动系统
```bash
node server-simple.js
```

### 2. 访问管理界面
打开浏览器访问：http://localhost:3001

### 3. 首次登录设置
1. 点击 **"🚀 打开浏览器登录"** 按钮
2. 系统会打开一个Chrome浏览器窗口
3. 在浏览器中访问AnyRouter并完成GitHub OAuth登录
4. 登录成功后，系统会自动保存登录状态

### 4. 验证登录状态
- 点击 **"🔍 检查登录状态"** 确认已登录
- 登录状态显示为绿色 ✅ 表示成功

### 5. 开始使用
- **手动检查**：点击 **"✅ 立即检查奖励"** 手动获取当日奖励
- **自动打卡**：系统每天早上6点自动执行检查
- **查看记录**：在页面底部查看历史打卡记录

## 💡 系统特点

### ✅ 优势
- **简单易用**：只需手动登录一次
- **状态保持**：利用Chrome用户数据目录保存登录状态
- **无需密码**：不需要存储GitHub账户密码
- **可视化操作**：浏览器窗口可见，便于调试
- **自动定时**：每天早上6点自动执行

### 📋 主要功能
- 🔐 手动登录AnyRouter（支持GitHub OAuth）
- 💰 自动检测页面余额信息
- 🎁 识别每日$25奖励
- 📊 记录每日打卡结果
- ⏰ 定时自动执行（每天6点）
- 🖥️ Web管理界面

## 🛠️ 技术实现

### 后端架构
- **Express.js** - Web服务器
- **Puppeteer** - 浏览器自动化（保存用户数据）
- **node-cron** - 定时任务调度
- **SQLite3** - 本地数据存储

### 数据存储
```sql
-- 打卡记录表
CREATE TABLE check_records (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    date TEXT UNIQUE,           -- 日期
    status TEXT,                -- 状态：success/failed
    balance TEXT,               -- 余额信息
    reward TEXT,                -- 奖励信息
    message TEXT,               -- 详细消息
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

## 🔄 工作流程

1. **启动时**：创建Chrome用户数据目录
2. **登录时**：打开浏览器供用户手动登录
3. **状态保存**：Chrome自动保存cookies和session
4. **定时检查**：每天6点自动访问页面
5. **数据提取**：解析页面中的余额和奖励信息
6. **结果记录**：保存到本地SQLite数据库

## 📱 界面说明

### 状态面板
- **今日状态**：显示当天是否已完成打卡
- **当前余额**：显示AnyRouter账户余额
- **今日奖励**：显示是否获得$25奖励
- **连续天数**：显示连续成功打卡天数

### 操作按钮
- **🚀 打开浏览器登录**：启动浏览器供用户登录
- **🔍 检查登录状态**：验证当前登录状态
- **✅ 立即检查奖励**：手动执行打卡检查
- **📊 刷新记录**：重新加载打卡历史
- **❌ 关闭浏览器**：关闭浏览器窗口

## ⚠️ 注意事项

1. **首次使用**：必须手动登录一次AnyRouter
2. **网络稳定**：确保网络连接稳定
3. **浏览器进程**：Chrome进程会在后台运行
4. **数据保存**：登录状态保存在 `./chrome-user-data` 目录
5. **定时任务**：确保程序持续运行以执行定时任务

## 🔧 故障排除

### 登录状态丢失
```bash
# 删除用户数据重新登录
rm -rf ./chrome-user-data
```

### 检查无法执行
- 确认登录状态有效
- 检查AnyRouter网站是否可访问
- 查看控制台日志了解具体错误

### 定时任务不执行
- 确保程序持续运行
- 检查系统时间设置
- 查看服务器日志

## 📄 文件结构

```
anyrouter-check/
├── server-simple.js       # 简化版服务器
├── public/
│   ├── index.html         # 简化版前端界面
│   └── index-complex.html # 复杂版前端界面（备份）
├── chrome-user-data/      # Chrome用户数据目录（自动创建）
├── anyrouter.db          # SQLite数据库
├── package.json          # 依赖配置
└── README-simple.md      # 本说明文件
```

## 🎉 开始使用

现在你可以开始使用这个简化版本：

1. 确保服务器正在运行：`node server-simple.js`
2. 访问：http://localhost:3001
3. 点击"打开浏览器登录"并完成AnyRouter登录
4. 系统会自动处理后续的每日打卡任务！

---

**简化版本更适合日常使用，避免了复杂的自动登录逻辑，更稳定可靠！** 🎯